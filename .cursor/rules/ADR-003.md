# ADR-003: Adopt Firebase (Firestore) for the modern stack with staging-only usage
Status: Accepted
Date: 2025-08-29

## Context
- The project needs a modern, managed backend for data in development that aligns with strict staging-only policies (see ADR-002) and avoids production connections.
- Firebase (Firestore) provides hosted, scalable storage with security rules and a straightforward developer experience.
- This repository is Python-first; the Firebase Admin SDK can be used for server-side tasks without exposing secrets in code.

## Decision
- Adopt Firebase Firestore as the default data store for development/staging tasks.
- Access policy: staging-only. Production access remains prohibited for development/testing.
- Credential management: use environment variables locally and in CI (no secrets in VCS). Provide a tracked `.env.example` for placeholders only.
- Minimal interface expectations:
  - Read credentials via env vars (FIREBASE_PROJECT_ID, FIREBASE_CLIENT_EMAIL, FIREBASE_PRIVATE_KEY, optional FIREBASE_DATABASE_URL).
  - Initialize Admin SDK only when needed by tools/scripts; avoid global initialization in import paths.

## Alternatives
- Self-hosted Postgres/MySQL: more ops overhead and not aligned with the goal of quick agent iteration.
- Other hosted serverless databases: viable, but Firestoreâ€™s rules and tooling are a good fit for staged development.

## Consequences
- Positive: simple developer setup; clear, codified rules; staging-first workflow.
- Negative: requires maintaining staging parity; Firestore billing considerations.
- Security/Privacy impact: secrets remain in env; rules guard access in staging.

## Verification
- `.env.example` added with placeholders.
- WARP.md and rules updated to reflect staging-only usage and setup expectations.
- Future code changes that integrate Firebase must include tests and reference this ADR.

