# ADR-002: Enforce staging-only database access during development; never connect agents to production
Status: Accepted
Date: 2025-08-29

## Context
- Agents and supporting tools may execute code locally and in CI.
- Connecting to production databases during development/testing risks data corruption, leakage of sensitive data, and unintended side effects.
- A clear, repository-level policy is required to standardize safe DB access across contributors and automations.

## Decision
- Agents and tooling must never connect to production databases during development or testing.
- Use staging database endpoints and credentials for all local and CI runs.
- Any production data access requires explicit approval and must be executed through controlled, auditable workflows; prefer read-only operations and anonymized data extracts when feasible.

## Alternatives
- Allow opt-in production access with safeguards — rejected for routine dev/test due to risk.
- Per-service ad-hoc policies — rejected; inconsistent and error-prone.

## Consequences
- Positive: Strong reduction in risk to production data; safer iterative development.
- Negative: Requires maintaining staging parity; potential data freshness lag versus production.
- Security/Privacy impact: Minimizes exposure of sensitive production data in dev/CI contexts.
- Migration plan: Ensure local/CI environment configs default to staging endpoints; update any scripts/docs referencing production.

## Verification
- Documentation updated in .cursor/rules/ADR.md and WARP.md.
- Code reviews/CI checks should reject configurations that reference production DBs for dev/test.

