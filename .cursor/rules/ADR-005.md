# ADR-005: Adaptive Agent Monitoring UI Enhancement
Status: Proposed
Date: 2025-08-31

## Context
- Current agent monitoring system uses a basic terminal-based display that updates every 10 seconds regardless of activity level
- The UI feels dated (described as "1986 looking") and provides poor user experience
- Fixed refresh intervals are inefficient: too slow during high activity, unnecessarily frequent during idle periods
- No visual indicators of agent activity levels, memory usage, or system health
- Limited contextual information about what agents are actually doing when active

## Decision
Enhance the agent monitoring system with:

### Adaptive Refresh Intervals
- **Idle state** (no flows, no memory writes): 10-second intervals
- **Low activity** (occasional memory reads, single agent active): 5-second intervals  
- **Medium activity** (multiple agents active, memory writes): 2-second intervals
- **High activity** (active flows, rapid memory operations): 1-second intervals

### Modern UI Improvements
- **Rich terminal interface** using libraries like `rich` or `textual` for better formatting
- **Color coding** for agent states: green (active), yellow (standby), red (error)
- **Progress indicators** for active flows and operations
- **Memory usage metrics** and context size tracking
- **Activity timeline** showing recent agent actions
- **Performance metrics** (response times, memory operations/sec)

### Autonomous Monitoring Features
- **Activity detection** based on memory store operations, agent state changes
- **Smart notifications** for errors, bottlenecks, or unusual patterns
- **Auto-scaling refresh rates** based on detected activity patterns
- **Background health checks** for agent responsiveness

## Alternatives
- Web-based dashboard (more complex, requires additional dependencies)
- Log-based monitoring (less real-time visibility)
- Keep current simple approach (no improvement in UX)

## Consequences
- **Positive:**
  - Better developer experience when monitoring agent swarm
  - More efficient resource usage with adaptive refresh rates
  - Earlier detection of issues through enhanced visibility
  - Professional appearance for demos and development sessions
  
- **Negative:**
  - Additional complexity in monitoring code
  - New dependencies for UI enhancement libraries
  - Potential compatibility issues across different terminal types
  
- **Security/Privacy impact:**
  - No sensitive data exposure (monitoring display only)
  - Memory context still respects existing privacy controls
  
- **Migration plan:**
  - Phase 1: Add activity detection to existing monitor
  - Phase 2: Implement adaptive refresh intervals
  - Phase 3: Enhanced UI with rich terminal features
  - Phase 4: Add performance metrics and health checks

## Verification
- **Tests added/updated:**
  - `test_monitor_adaptive_refresh.py` for interval logic
  - `test_monitor_activity_detection.py` for activity sensing
  - `test_monitor_ui_components.py` for display formatting
  
- **Metrics/alerts:**
  - Monitor refresh rate adaptation accuracy
  - Activity detection sensitivity and specificity
  - UI rendering performance across terminal types
  - User satisfaction with monitoring experience

## Implementation Priority
**HIGH** - This enhancement directly improves the developer experience when working with the multi-agent system and provides better visibility into autonomous agent behavior, which is critical for the mission of creating a persistent-memory mother-agent.

## Next Steps
1. Write failing tests for activity detection logic
2. Implement basic activity sensing in monitor status module
3. Add adaptive refresh interval logic to watch-agents script
4. Integrate rich/textual for enhanced terminal UI
5. Add performance metrics and health monitoring
